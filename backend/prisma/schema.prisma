generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String      @id @default(cuid())
  email            String      @unique
  password         String
  name             String?
  createdAt        DateTime    @default(now())
  updatedAt        DateTime    @updatedAt
  budget           String?
  city             String?
  hobbies          String[]
  locality         String?
  age              Int?
  bio              String?
  dietaryPrefs     String?
  firstName        String?
  gender           String?
  interests        String[]
  lastName         String?
  musicGenres      String[]
  personalityType  String?
  petPreference    String?
  phone            String?
  profession       String?
  sportsActivities String[]
  sleepPattern     String?
  drinkingHabits   String?
  hostingStyle     String?
  languagesSpoken  String[]
  petOwnership     String?
  smokingHabits    String?
  socialStyle      String?
  weekendStyle     String?
  cleanliness      Int         @default(3)
  moveInDate       DateTime?
  savedFlats       SavedFlat[]

  @@map("users")
}

model SavedFlat {
  id          String   @id @default(cuid())
  userId      String
  gender      String?
  flatmateReq String?
  message     String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  bhk         String?
  budget      String?
  city        String   @default("")
  flatId      String   @default("")
  sourceId    String?
  subregion   String?
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  // Unique constraint to prevent saving the same flat multiple times
  @@unique([userId, flatId])
  @@map("saved_flats")
}
